<html>

<head>

<title>IRC Log for #duraspace on irc.freenode.net, collected by DuraLogBot</title>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="description" content="IRC Log for #duraspace" />
<meta name="keywords" content="IRC Log for #duraspace" />

<style type="text/css">
body {
    background: #ffffff;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #000000;
}
.irc-date  {font-family: Courier New, Courier, mono;}
.irc-green {color: #009200;}
.irc-black {color: #000000;}
.irc-brown {color: #7b0000;}
.irc-navy  {color: #00007b;}
.irc-brick {color: #9c009c;}
.irc-red   {color: #ff0000;}
}
</style>

</head>

<body>

<h1>#duraspace IRC Log</h1>

<p>
 <a href="index.html">Index</a>
</p>

<h2>IRC Log for 2012-07-05
</h2>
<p>
 Timestamps are in GMT/BST.
</p>

<p><span class="irc-date">[2:18]</span> <span class="irc-navy">* eddies (~eddies@unaffiliated/eddies) Quit (Quit: Leaving.)</span><br />
<span class="irc-date">[6:36]</span> <span class="irc-brown">-sendak.freenode.net- *** Looking up your hostname...</span><br />
<span class="irc-date">[6:36]</span> <span class="irc-brown">-sendak.freenode.net- *** Checking Ident</span><br />
<span class="irc-date">[6:36]</span> <span class="irc-brown">-sendak.freenode.net- *** Found your hostname</span><br />
<span class="irc-date">[6:36]</span> <span class="irc-brown">-sendak.freenode.net- *** No Ident response</span><br />
<span class="irc-date">[6:36]</span> <span class="irc-green">* DuraLogBot (~PircBot@atlas.duraspace.org) has joined #duraspace</span><br />
<span class="irc-date">[6:36]</span> <span class="irc-green">* Topic is '[Welcome to DuraSpace - This channel is logged - <a href="http://irclogs.duraspace.org/]'">http://irclogs.duraspace.org/]'</a></span><br />
<span class="irc-date">[6:36]</span> <span class="irc-green">* Set by cwilper!ad579d86@gateway/web/freenode/ip.173.87.157.134 on Fri Oct 22 01:19:41 UTC 2010</span><br />
<span class="irc-date">[11:34]</span> <span class="irc-green">* lyncode (~DSpace@bl23-33-254.dsl.telepac.pt) has joined #duraspace</span><br />
<span class="irc-date">[12:11]</span> <span class="irc-green">* mhwood (mwood@mhw.ulib.iupui.edu) has joined #duraspace</span><br />
<span class="irc-date">[12:11]</span> <span class="irc-navy">* mhwood (mwood@mhw.ulib.iupui.edu) Quit (Client Quit)</span><br />
<span class="irc-date">[12:12]</span> <span class="irc-green">* mhwood (mwood@mhw.ulib.iupui.edu) has joined #duraspace</span><br />
<span class="irc-date">[12:32]</span> <span class="irc-green">* Ed__ (1809d1a2@gateway/web/freenode/ip.24.9.209.162) has joined #duraspace</span><br />
<span class="irc-date">[12:49]</span> <span class="irc-green">* eddies (~eddies@cm18.epsilon183.maxonline.com.sg) has joined #duraspace</span><br />
<span class="irc-date">[12:49]</span> <span class="irc-navy">* eddies (~eddies@cm18.epsilon183.maxonline.com.sg) Quit (Changing host)</span><br />
<span class="irc-date">[12:49]</span> <span class="irc-green">* eddies (~eddies@unaffiliated/eddies) has joined #duraspace</span><br />
<span class="irc-date">[12:54]</span> <span class="irc-navy">* lyncode (~DSpace@bl23-33-254.dsl.telepac.pt) Quit (Quit: lyncode)</span><br />
<span class="irc-date">[12:57]</span> <span class="irc-green">* cwilper (ad579e7f@gateway/web/freenode/ip.173.87.158.127) has joined #duraspace</span><br />
<span class="irc-date">[13:02]</span> <span class="irc-black">&lt;cwilper&gt; <a href="https://wiki.duraspace.org/display/FCREPO/2012-07-05+-+Fedora+Committer+Meeting">https://wiki.duraspace.org/display/FCREPO/2012-07-05+-+Fedora+Committer+Meeting</a></span><br />
<span class="irc-date">[13:08]</span> <span class="irc-black">&lt;eddies&gt; FCREPO-1113</span><br />
<span class="irc-date">[13:08]</span> <span class="irc-black">&lt;eddies&gt; <a href="https://jira.duraspace.org/browse/FCREPO-1113">https://jira.duraspace.org/browse/FCREPO-1113</a></span><br />
<span class="irc-date">[13:18]</span> <span class="irc-green">* elschlomo (~ruckus@HSI-KBW-46-223-116-28.hsi.kabel-badenwuerttemberg.de) has joined #duraspace</span><br />
<span class="irc-date">[13:22]</span> <span class="irc-black">&lt;cwilper&gt; MAVEN_OPTS="-Xmx512m -Xms512m -XX:PermSize=256m -XX:MaxPermSize=512m"</span><br />
<span class="irc-date">[13:29]</span> <span class="irc-green">* lyncode (~DSpace@bl23-33-254.dsl.telepac.pt) has joined #duraspace</span><br />
<span class="irc-date">[13:47]</span> <span class="irc-navy">* cwilper (ad579e7f@gateway/web/freenode/ip.173.87.158.127) Quit (Ping timeout: 245 seconds)</span><br />
<span class="irc-date">[13:50]</span> <span class="irc-green">* cwilperviaphone (a68958b0@gateway/web/freenode/ip.166.137.88.176) has joined #duraspace</span><br />
<span class="irc-date">[14:17]</span> <span class="irc-green">* barmintor_afk is now known as barmintor</span><br />
<span class="irc-date">[14:40]</span> <span class="irc-navy">* cwilperviaphone (a68958b0@gateway/web/freenode/ip.166.137.88.176) Quit (Ping timeout: 245 seconds)</span><br />
<span class="irc-date">[14:49]</span> <span class="irc-green">* cwilper (4a2c9bc7@gateway/web/freenode/ip.74.44.155.199) has joined #duraspace</span><br />
<span class="irc-date">[14:50]</span> <span class="irc-black">&lt;cwilper&gt; eddies: of course the minute i got whatsapp installed, my internet came back.</span><br />
<span class="irc-date">[15:00]</span> <span class="irc-black">&lt;eddies&gt; heh. just grabbing some dinner, will be back in a bit</span><br />
<span class="irc-date">[15:23]</span> <span class="irc-black">&lt;eddies&gt; fyi, re-running tests on aws w/ maven_opts. will check in again in a bit</span><br />
<span class="irc-date">[15:41]</span> <span class="irc-black">&lt;lyncode&gt; how do i add artifact dependencies to dspace-parent/dspace/lib ?</span><br />
<span class="irc-date">[15:48]</span> <span class="irc-navy">* Ed__ (1809d1a2@gateway/web/freenode/ip.24.9.209.162) Quit (Ping timeout: 245 seconds)</span><br />
<span class="irc-date">[15:54]</span> <span class="irc-black">&lt;eddies&gt; cwilper: test suite failed, but at least now it looks like a specific failure with risearch</span><br />
<span class="irc-date">[15:55]</span> <span class="irc-black">&lt;cwilper&gt; eddies: i'm also having trouble with the ri in doing sanity checks vs oaiprovider. it sucks up a bunch of cpu and makes tomcat unresponsive.</span><br />
<span class="irc-date">[15:56]</span> <span class="irc-black">&lt;eddies&gt; cwilper: i just noticed the rebuilder didn</span><br />
<span class="irc-date">[15:56]</span> <span class="irc-black">&lt;eddies&gt; oops. I meant: I just noticed the rebuilder didn't actually seem to work (this is w/ mptstore). left the triples untouched after i ran the rebuilder against an empty objectstore &amp; datastreamstore</span><br />
<span class="irc-date">[15:57]</span> <span class="irc-black">&lt;eddies&gt; cwilper: you're using mulgara, right?</span><br />
<span class="irc-date">[15:57]</span> <span class="irc-black">&lt;cwilper&gt; hmm. not looking good. for oaiprovider tests, i was just trying to ingest some test objects, and i had to keep killing tomcat. doing thread dumps wasn't too revealing, but i did notice mulgara seemed to be stuck in some sort of loop.</span><br />
<span class="irc-date">[15:57]</span> <span class="irc-black">&lt;cwilper&gt; yeah</span><br />
<span class="irc-date">[15:59]</span> <span class="irc-black">&lt;cwilper&gt; well, "stuck in a loop" may not be entirely accurate, but it's way in the internals of AVLNode, one of the threads is saying it's waiting on a condition...but the call stack looks like it's in the middle of a modification of triples. like it's just getting stuck there and consuming all the cpu till i kill it.</span><br />
<span class="irc-date">[16:08]</span> <span class="irc-black">&lt;cwilper&gt; Currently getting this: ERROR 2012-07-05 12:06:00.896 [http-8080-2] (RISearchServlet) Unexpected error servicing API-A request java.lang.OutOfMemoryError: PermGen space</span><br />
<span class="irc-date">[16:09]</span> <span class="irc-black">&lt;cwilper&gt; ...after which Tomcat hangs. So this may be related to the resource exhaustion issue you saw earlier. I don't know.</span><br />
<span class="irc-date">[16:13]</span> <span class="irc-green">* PeterDietz (~peterdiet@128.146.173.112) has joined #duraspace</span><br />
<span class="irc-date">[16:22]</span> <span class="irc-black">&lt;cwilper&gt; eddies: sure enough, when i boost up the memory values via JAVA_OPTS, the oaiprovider stuff seems to work fine.</span><br />
<span class="irc-date">[16:23]</span> <span class="irc-black">&lt;eddies&gt; cwilper: does the rebuilder even work w/ mptstore?</span><br />
<span class="irc-date">[16:24]</span> <span class="irc-black">&lt;eddies&gt; or, rather, is it supposed to?</span><br />
<span class="irc-date">[16:24]</span> <span class="irc-black">&lt;cwilper&gt; it's quite possible that this release puts  bigger demands on PermGenSize...with all the library updates &amp; move to cxf.</span><br />
<span class="irc-date">[16:24]</span> <span class="irc-black">&lt;cwilper&gt; re:mptstore, hmmm...i thought it didn't actually do the database table clearing.</span><br />
<span class="irc-date">[16:24]</span> <span class="irc-black">&lt;eddies&gt; ResourceIndexRebuilder only has a deleteDirectory method, nothing to drop or clear tables</span><br />
<span class="irc-date">[16:24]</span> <span class="irc-black">&lt;eddies&gt; the console output makes it look like it's rebuilding :P</span><br />
<span class="irc-date">[16:25]</span> <span class="irc-black">&lt;cwilper&gt; yes, thinking back, i recall that we said an mptstore rebuild requires a manual clearing of the tables. i guess that's still the case.</span><br />
<span class="irc-date">[16:26]</span> <span class="irc-black">&lt;cwilper&gt; but i thought the rebuilder gave a big message to that effect.</span><br />
<span class="irc-date">[16:28]</span> <span class="irc-black">&lt;cwilper&gt; <a href="https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/java/org/fcrepo/server/resourceIndex/ResourceIndexRebuilder.java#L178">https://github.com/fcrepo/fcrepo/blob/master/fcrepo-server/src/main/java/org/fcrepo/server/resourceIndex/ResourceIndexRebuilder.java#L178</a></span><br />
<span class="irc-date">[16:32]</span> <span class="irc-black">&lt;cwilper&gt; ahh, this commit caused that not to happen anymore: <a href="https://github.com/fcrepo/fcrepo/commit/c8c9b8b0c447dd9a0c9513d90f7af9d464d8c99f">https://github.com/fcrepo/fcrepo/commit/c8c9b8b0c447dd9a0c9513d90f7af9d464d8c99f</a>   ...the message is only printed if dropIndex is actually called, which it no longer is in the case that they're running mptstore</span><br />
<span class="irc-date">[16:33]</span> <span class="irc-black">&lt;cwilper&gt; so that seems relatively small, but should be logged. but the more concerning ec2 issue still stands, right?</span><br />
<span class="irc-date">[17:16]</span> <span class="irc-navy">* cwilper (4a2c9bc7@gateway/web/freenode/ip.74.44.155.199) Quit (Quit: Page closed)</span><br />
<span class="irc-date">[17:16]</span> <span class="irc-green">* cwilper (4a2c9bc7@gateway/web/freenode/ip.74.44.155.199) has joined #duraspace</span><br />
<span class="irc-date">[17:56]</span> <span class="irc-black">&lt;eddies&gt; cwilper: running the tests again. not sure if the tests failed because mptstore was inconsistent w/ the rest of fedora before starting test</span><br />
<span class="irc-date">[18:20]</span> <span class="irc-navy">* lyncode (~DSpace@bl23-33-254.dsl.telepac.pt) Quit (Quit: lyncode)</span><br />
<span class="irc-date">[18:24]</span> <span class="irc-black">&lt;eddies&gt; no dice: <a href="https://gist.github.com/3055494">https://gist.github.com/3055494</a></span><br />
<span class="irc-date">[18:35]</span> <span class="irc-black">&lt;cwilper&gt; does that test pass with mulgara but not mptstore?</span><br />
<span class="irc-date">[18:37]</span> <span class="irc-black">&lt;cwilper&gt; i assume so, because i see it's enabled by default for the configC tests.</span><br />
<span class="irc-date">[18:48]</span> <span class="irc-black">&lt;eddies&gt; yeah, only failing w/ mptstore</span><br />
<span class="irc-date">[18:50]</span> <span class="irc-black">&lt;eddies&gt; i'm running out of gas</span><br />
<span class="irc-date">[18:52]</span> <span class="irc-black">&lt;eddies&gt; unless the failure i'm getting isn't reproducible by others, i don't think this is ready for release</span><br />
<span class="irc-date">[18:56]</span> <span class="irc-black">&lt;cwilper&gt; i only have a couple hours left today to help. so i could try the mptstore test if you want, but with the window we have left, i'm not sure we'd get it out anyway..</span><br />
<span class="irc-date">[18:57]</span> <span class="irc-black">&lt;cwilper&gt; just to be clear, the mptstore test fails on your local machine, right? so i shouldn't need to spin up an ec2 instance to try to reproduce.</span><br />
<span class="irc-date">[18:59]</span> <span class="irc-black">&lt;eddies&gt; i'm running this on ec2</span><br />
<span class="irc-date">[19:00]</span> <span class="irc-black">&lt;eddies&gt; ec2 large instance w/ ubuntu 12.04 &amp; postgres</span><br />
<span class="irc-date">[19:01]</span> <span class="irc-black">&lt;eddies&gt; mvn -Dconfig=B -Dfedora.home=~/fedora -Dit.test=org.fcrepo.test.api.TestRISearch clean verify</span><br />
<span class="irc-date">[19:06]</span> <span class="irc-black">&lt;cwilper&gt; but you haven't run the same test in any other environment yet, right? if that's the case, i'll start by running locally on os x (which will be quickest)</span><br />
<span class="irc-date">[19:07]</span> <span class="irc-black">&lt;eddies&gt; no, have only run postgres test on ec2</span><br />
<span class="irc-date">[19:11]</span> <span class="irc-black">&lt;cwilper&gt; ok, installed and rebuilt ri with mptstore...then removed objects from fedora, and purges seemed to reflect properly in the riTriples db. now running your mvn test command...</span><br />
<span class="irc-date">[19:12]</span> <span class="irc-black">&lt;eddies&gt; (gotta run that from fcrepo-integrationtest dir, don't forget, not from parent fcrepo dir)</span><br />
<span class="irc-date">[19:17]</span> <span class="irc-black">&lt;cwilper&gt; ahh, same failure here. sounds like it wasn't meant to happen today.</span><br />
<span class="irc-date">[19:17]</span> <span class="irc-black">&lt;cwilper&gt; it's the stars' fault.</span><br />
<span class="irc-date">[19:20]</span> <span class="irc-black">&lt;cwilper&gt; too bad...but we're really awfully close. even if this one is simple to debug, we're pretty much out of time to get this out the door, so let's figure out the next step in person next week, eh?</span><br />
<span class="irc-date">[19:28]</span> <span class="irc-black">&lt;eddies&gt; yeah</span><br />
<span class="irc-date">[20:45]</span> <span class="irc-navy">* cwilper (4a2c9bc7@gateway/web/freenode/ip.74.44.155.199) Quit (Quit: Page closed)</span><br />
<span class="irc-date">[21:01]</span> <span class="irc-navy">* mhwood (mwood@mhw.ulib.iupui.edu) Quit (Remote host closed the connection)</span><br />
<span class="irc-date">[21:44]</span> <span class="irc-green">* barmintor is now known as barmintor_afk</span><br />
</p>

<p>
 These logs were automatically created by <b>DuraLogBot</b> on
 <a href="irc://irc.freenode.net/duraspace">irc.freenode.net</a>
 using the <a href="http://www.jibble.org/logbot/">Java IRC LogBot</a>.
</p>

</body>

</html>